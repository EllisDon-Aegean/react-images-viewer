!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("prop-types"),require("react"),require("styled-components"),require("react-scrolllock")):"function"==typeof define&&define.amd?define(["prop-types","react","styled-components","react-scrolllock"],t):n.ImgsViewer=t(n.PropTypes,n.React,n["styled-components"],n.ScrollLock)}(this,function(n,t,e,o){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var i="default"in t?t.default:t;e=e&&e.hasOwnProperty("default")?e.default:e,o=o&&o.hasOwnProperty("default")?o.default:o;var r={container:{background:"rgba(0, 0, 0, .8)",gutter:{horizontal:10,vertical:10},zIndex:2001},header:{height:40,font:"Arial"},close:{fill:"white"},footer:{color:"#fff",count:{color:"rgba(255, 255, 255, .75)",fontSize:".85em",font:"Arial"},height:40,gutter:{horizontal:0,vertical:5},font:"Arial"},thumbnail:{activeBorderColor:"#fff",size:50,gutter:2},arrow:{background:"none",fill:"#fff",height:120}},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),u=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},c=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},p=function(n,t){var e={};for(var o in n)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},d=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},f=function(n,t){return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))},m={arrowLeft:function(n){return'<svg fill="'+n+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M213.7,256L213.7,256L213.7,256L380.9,81.9c4.2-4.3,4.1-11.4-0.2-15.8l-29.9-30.6c-4.3-4.4-11.3-4.5-15.5-0.2L131.1,247.9 c-2.2,2.2-3.2,5.2-3,8.1c-0.1,3,0.9,5.9,3,8.1l204.2,212.7c4.2,4.3,11.2,4.2,15.5-0.2l29.9-30.6c4.3-4.4,4.4-11.5,0.2-15.8 L213.7,256z"/>\n\t</svg>'},arrowRight:function(n){return'<svg fill="'+n+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M298.3,256L298.3,256L298.3,256L131.1,81.9c-4.2-4.3-4.1-11.4,0.2-15.8l29.9-30.6c4.3-4.4,11.3-4.5,15.5-0.2l204.2,212.7 c2.2,2.2,3.2,5.2,3,8.1c0.1,3-0.9,5.9-3,8.1L176.7,476.8c-4.2,4.3-11.2,4.2-15.5-0.2L131.3,446c-4.3-4.4-4.4-11.5-0.2-15.8 L298.3,256z"/>\n\t</svg>'},close:function(n){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'+n+'" class="bi bi-arrow-left" viewBox="0 0 16 16">\n\t\t<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>\n  \t</svg>'},plus:function(n){return'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="'+n+'">\n    <path d="M9 9V1.5C9 0.947715 9.44771 0.5 10 0.5C10.5523 0.5 11 0.947715 11 1.5V9H18.5C19.0523 9 19.5 9.44771 19.5 10C19.5 10.5523 19.0523 11 18.5 11H11V18.5C11 19.0523 10.5523 19.5 10 19.5C9.44771 19.5 9 19.0523 9 18.5V11H1.5C0.947715 11 0.5 10.5523 0.5 10C0.5 9.44771 0.947715 9 1.5 9H9Z"/>\n    </svg>'},cross:function(n){return'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="'+n+'">\n    <path d="M6.50285 7.91694L0.293015 1.70711C-0.097509 1.31658 -0.097509 0.683418 0.293015 0.292893C0.68354 -0.0976311 1.3167 -0.0976311 1.70723 0.292893L7.91707 6.50273L14.1269 0.292893C14.5174 -0.0976311 15.1506 -0.0976311 15.5411 0.292893C15.9316 0.683418 15.9316 1.31658 15.5411 1.70711L9.33128 7.91694L15.5411 14.1268C15.9316 14.5173 15.9316 15.1505 15.5411 15.541C15.1506 15.9315 14.5174 15.9315 14.1269 15.541L7.91707 9.33116L1.70723 15.541C1.3167 15.9315 0.68354 15.9315 0.293015 15.541C-0.097509 15.1505 -0.097509 14.5173 0.293015 14.1268L6.50285 7.91694Z"/>\n    </svg>'},minus:function(n){return'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 472.615 472.615" style="enable-background:new 0 0 472.615 472.615;" xml:space="preserve" fill="'+n+'">\n<g>\n   <g>\n       <rect y="196.923" width="472.615" height="78.769"/>\n   </g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>'}},h=function(n){var t=n.fill,e=n.type,o=p(n,["fill","type"]),r=m[e];return i.createElement("span",u({dangerouslySetInnerHTML:{__html:r(t)}},o))};h.defaultProps={fill:"#fff"};var g=f(["\n  background: none;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  outline: none;\n  padding: 10px; // increase hit area\n  position: absolute;\n  top: 50%;\n\n  // disable user select\n  -webkit-touch-callout: none;\n  user-select: none;\n\n  right: ",";\n  left: ",";\n\n  height: ",";\n  margin-top: ",";\n  width: 40px;\n\n  @media (min-width: 768px) {\n    width: 70,\n  };\n"],["\n  background: none;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  outline: none;\n  padding: 10px; // increase hit area\n  position: absolute;\n  top: 50%;\n\n  // disable user select\n  -webkit-touch-callout: none;\n  user-select: none;\n\n  right: ",";\n  left: ",";\n\n  height: ",";\n  margin-top: ",";\n  width: 40px;\n\n  @media (min-width: 768px) {\n    width: 70,\n  };\n"]),v=e.button(g,function(n){return n.right?n.defaults.container.gutter.horizontal+"px":"none"},function(n){return n.right?"none":n.defaults.container.gutter.horizontal+"px"},function(n){return n.height+"px"},function(n){return n.height/-2+"px"});function y(n){var t=n.direction,e=n.icon,o=n.onClick,a=n.theme,s=n.size,l=p(n,["direction","icon","onClick","theme","size"]),c="medium"==s?r.arrow.height:r.thumbnail.size;return i.createElement(v,u({type:"button",right:t&&"right"==t,height:c,onClick:o,onTouchEnd:o,defaults:r},l),i.createElement(h,{fill:!!a.arrow&&a.arrow.fill||r.arrow.fill,type:e}))}var w=f(["\n    align-items: center;\n    background: ",";\n    box-sizing: border-box;\n    display: flex;\n    height: 100%;\n    justify-content: center;\n    left: 0;\n    padding-top: ","px;\n    padding-right: ","px;\n    padding-bottom: ","px;\n    padding-left: ","px;\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: ",";\n  "],["\n    align-items: center;\n    background: ",";\n    box-sizing: border-box;\n    display: flex;\n    height: 100%;\n    justify-content: center;\n    left: 0;\n    padding-top: ","px;\n    padding-right: ","px;\n    padding-bottom: ","px;\n    padding-left: ","px;\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: ",";\n  "]),b=e.div(w,function(n){return n.defaults.container.background},function(n){return n.defaults.container.gutter.vertical},function(n){return n.defaults.container.gutter.horizontal},function(n){return n.defaults.container.gutter.vertical},function(n){return n.defaults.container.gutter.horizontal},function(n){return n.defaults.container.zIndex});function x(n){return i.createElement(b,u({defaults:r,id:"viewerBackdrop"},n))}r.container.background,r.container.gutter.vertical,r.container.gutter.horizontal,r.container.gutter.vertical,r.container.gutter.horizontal,r.container.zIndex;var C=f(["\n    box-sizing: border-box;\n    color: ",";\n    cursor: auto;\n    display: flex;\n    justify-content: space-between;\n    left: 0;\n    line-height: 1.3;\n    padding-top: ","px;\n    padding-right: ","px;\n    padding-bottom: ","px;\n    padding-left: ","px;\n  "],["\n    box-sizing: border-box;\n    color: ",";\n    cursor: auto;\n    display: flex;\n    justify-content: space-between;\n    left: 0;\n    line-height: 1.3;\n    padding-top: ","px;\n    padding-right: ","px;\n    padding-bottom: ","px;\n    padding-left: ","px;\n  "]),S=f(["\n    color: ",";\n    font-size: ",";\n    padding-left: 1em; // add a small gutter for the caption\n    font-family: ",";\n  "],["\n    color: ",";\n    font-size: ",";\n    padding-left: 1em; // add a small gutter for the caption\n    font-family: ",";\n  "]);function k(n){var t=n.countCurr,o=n.countSeparator,a=n.countTotal,s=n.showCount;n.theme,p(n,["countCurr","countSeparator","countTotal","showCount","theme"]);if(!s)return null;var l=e.div(C,function(n){return n.defaults.footer.color},function(n){return n.defaults.footer.gutter.vertical},function(n){return n.defaults.footer.gutter.horizontal},function(n){return n.defaults.footer.gutter.vertical},function(n){return n.defaults.footer.gutter.horizontal}),u=e.div(S,function(n){return n.defaults.footer.count.color},function(n){return n.defaults.footer.count.fontSize},function(n){return n.defaults.footer.count.font}),c=s?i.createElement(u,{defaults:r},t,o,a):i.createElement("span",null);return i.createElement(l,{defaults:r},c)}r.footer.color,r.footer.gutter.vertical,r.footer.gutter.horizontal,r.footer.gutter.vertical,r.footer.gutter.horizontal,r.footer.count.color,r.footer.count.fontSize;var P=f(["\n  display: flex;\n  height: ",";\n  position: relative;\n  width: 100%;\n"],["\n  display: flex;\n  height: ",";\n  position: relative;\n  width: 100%;\n"]),T=f(["\n  position: absolute;\n  right: 0px;\n"],["\n  position: absolute;\n  right: 0px;\n"]),z=f(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]),E=f(["\n  vertical-align: middle;\n  color: ",";\n  display: inline-block;\n  font-family: ",";\n"],["\n  vertical-align: middle;\n  color: ",";\n  display: inline-block;\n  font-family: ",";\n"]),I=f(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  position: relative;\n  top: 0px;\n  vertical-align: bottom;\n  z-index: 1;\n\n  height: 40px;\n  padding: 10px;\n  width: 40px;\n"],["\n  background: none;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  position: relative;\n  top: 0px;\n  vertical-align: bottom;\n  z-index: 1;\n\n  height: 40px;\n  padding: 10px;\n  width: 40px;\n"]);function Y(n){var t=n.caption,e=n.customControls,o=n.onClose,a=n.showCloseBtn,s=n.closeBtnTitle,l=n.theme,c=p(n,["caption","customControls","onClose","showCloseBtn","closeBtnTitle","theme"]);return i.createElement(O,u({defaults:r},c),i.createElement(X,{defaults:r},!!a&&i.createElement(A,null,i.createElement(D,{title:s,onClick:o},i.createElement(h,{fill:!!l.close&&l.close.fill||r.close.fill,type:"close"})),i.createElement(N,{defaults:r},t)),e?i.createElement(L,null,e):i.createElement("span",null)))}var O=e.div(P,function(n){return n.defaults.header.height}),X=e.div(P,function(n){return n.defaults.header.height}),L=e.div(T),A=e.div(z),N=e.span(E,function(n){return n.defaults.footer.count.color},function(n){return n.defaults.header.font}),D=e.button(I),B=f(["\n  background-position: center;\n  background-size: cover;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px hsla(0, 0%, 100%, .2);\n  cursor: pointer;\n  display: inline-block;\n  height: ",";\n  margin: ",";\n  overflow: hidden;\n  width: ",";\n  box-shadow: ",";\n"],["\n  background-position: center;\n  background-size: cover;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px hsla(0, 0%, 100%, .2);\n  cursor: pointer;\n  display: inline-block;\n  height: ",";\n  margin: ",";\n  overflow: hidden;\n  width: ",";\n  box-shadow: ",";\n"]);function _(n){var t=n.index,e=n.src,o=n.thumbnail,a=n.active,s=n.onClick,l=(n.theme,o||e);return i.createElement(j,{active:a,defaults:r,onClick:function(n){n.preventDefault(),n.stopPropagation(),s(t)},style:{backgroundImage:'url("'+l+'")'}})}var j=e.div(B,function(n){return n.defaults.thumbnail.size+"px"},function(n){return n.defaults.thumbnail.gutter+"px"},function(n){return n.defaults.thumbnail.size+"px"},function(n){return n.active?"inset 0 0 0 2px "+n.defaults.thumbnail.activeBorderColor:"none"}),W=f(["\n  bottom: ",";\n  height: ",";\n  padding: 0 50px;\n  position: absolute;\n  text-align: center;\n  white-space: nowrap;\n  left: 50%;\n  transform: translateX(-50%);\n"],["\n  bottom: ",";\n  height: ",";\n  padding: 0 50px;\n  position: absolute;\n  text-align: center;\n  white-space: nowrap;\n  left: 50%;\n  transform: translateX(-50%);\n"]),K=e.div(W,function(n){return n.theme.container.gutter.vertical+"px"},function(n){return n.theme.thumbnail.size+"px"}),M={height:r.thumbnail.size+2*r.thumbnail.gutter,width:40},F=function(n){function t(n){s(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e.state={hasCustomPage:!1},e.gotoPrev=e.gotoPrev.bind(e),e.gotoNext=e.gotoNext.bind(e),e}return c(t,n),l(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(n){n.currImg!==this.props.currImg&&this.setState({hasCustomPage:!1})}},{key:"getFirst",value:function(){var n=this.props,t=n.currImg,e=n.offset;return this.state.hasCustomPage?this.clampFirst(this.state.first):this.clampFirst(t-e)}},{key:"setFirst",value:function(n,t){var e=this.state.first;n&&(n.preventDefault(),n.stopPropagation()),e!==t&&this.setState({hasCustomPage:!0,first:t})}},{key:"gotoPrev",value:function(n){this.setFirst(n,this.getFirst()-this.props.offset)}},{key:"gotoNext",value:function(n){this.setFirst(n,this.getFirst()+this.props.offset)}},{key:"clampFirst",value:function(n){var t=this.props,e=t.imgs,o=2*t.offset+1;return n<0?0:n+o>e.length?e.length-o:n}},{key:"renderArrowPrev",value:function(n){var t=this.props.leftTitle;return this.getFirst()<=0?null:i.createElement(y,{theme:n,direction:"left",size:"small",icon:"arrowLeft",onClick:this.gotoPrev,style:M,title:t,type:"button"})}},{key:"renderArrowNext",value:function(n){var t=this.props,e=t.offset,o=t.imgs,r=t.rightTitle,a=2*e+1;return this.getFirst()+a>=o.length?null:i.createElement(y,{theme:n,direction:"right",size:"small",icon:"arrowRight",onClick:this.gotoNext,style:M,title:r,type:"button"})}},{key:"render",value:function(){var n=this.props,t=n.imgs,e=n.currImg,o=n.onClickThumbnail,r=n.offset,a=n.theme,s=2*r+1,l=[],c=0;return t.length<=s?l=t:(c=this.getFirst(),l=t.slice(c,c+s)),i.createElement(K,{theme:a},this.renderArrowPrev(a),l.map(function(n,t){return i.createElement(_,u({theme:a,key:c+t},n,{index:c+t,onClick:o,active:c+t===e}))}),this.renderArrowNext(a))}}]),t}(t.Component),H=f(["\n  display: flex;\n  justify-content: center;\n"],["\n  display: flex;\n  justify-content: center;\n"]),R=f(["\n  @keyframes bouncingKeyFrames {\n    0% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n    100%{\n      opacity: .1;\n      transform: ","\n    }\n  }\n\n  width: ",";\n  height: ",";\n  margin: ",";\n  background: ",";\n  border-radius: 50%;\n  animation-name: bouncingKeyFrames;\n  animation-duration: .6s;\n  animation-direction: alternate;\n  animation-iteration-count: infinite;\n  animation-delay: ",";\n"],["\n  @keyframes bouncingKeyFrames {\n    0% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n    100%{\n      opacity: .1;\n      transform: ","\n    }\n  }\n\n  width: ",";\n  height: ",";\n  margin: ",";\n  background: ",";\n  border-radius: 50%;\n  animation-name: bouncingKeyFrames;\n  animation-duration: .6s;\n  animation-direction: alternate;\n  animation-iteration-count: infinite;\n  animation-delay: ",";\n"]),Z=e.div(H),q=e.div(R,function(n){return"translateY(-"+n.size+"px)"},function(n){return n.size+"px"},function(n){return n.size+"px"},function(n){return 3*n.size+"px "+.2*n.size+"px"},function(n){return n.color},function(n){return n.animationDelay+"s"});var U=!("undefined"==typeof window||!window.document||!window.document.createElement);var Q=function(n,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)};var V=function(){return(V=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)};function G(n,t,e){if(e||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||t)}var J=function(n,t){return Number(n.toFixed(t))},$=function(n,t){return"number"==typeof n?n:t},nn=function(n,t,e){e&&"function"==typeof e&&e(n,t)},tn={easeOut:function(n){return-Math.cos(n*Math.PI)/2+.5},linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:(4-2*n)*n-1},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}},en=function(n){"number"==typeof n&&cancelAnimationFrame(n)},on=function(n){n.mounted&&(en(n.animation),n.animate=!1,n.animation=null,n.velocity=null)};function rn(n,t,e,o){if(n.mounted){var i=(new Date).getTime();on(n),n.animation=function(){if(!n.mounted)return en(n.animation);var r=(new Date).getTime()-i,a=r/e,s=(0,tn[t])(a);r>=e?(o(1),n.animation=null):n.animation&&(o(s),requestAnimationFrame(n.animation))},requestAnimationFrame(n.animation)}}function an(n,t,e,o){var i=function(n){var t=n.scale,e=n.positionX,o=n.positionY;if(isNaN(t)||isNaN(e)||isNaN(o))return!1;return!0}(t);if(n.mounted&&i){var r=n.setTransformState,a=n.transformState,s=a.scale,l=a.positionX,u=a.positionY,c=t.scale-s,p=t.positionX-l,d=t.positionY-u;0===e?r(t.scale,t.positionX,t.positionY):rn(n,o,e,function(n){r(s+c*n,l+p*n,u+d*n)})}}var sn=function(n,t){var e=n.wrapperComponent,o=n.contentComponent,i=n.setup.centerZoomedOut;if(!e||!o)throw new Error("Components are not mounted");var r=function(n,t,e){var o=n.offsetWidth,i=n.offsetHeight,r=t.offsetWidth*e,a=t.offsetHeight*e;return{wrapperWidth:o,wrapperHeight:i,newContentWidth:r,newDiffWidth:o-r,newContentHeight:a,newDiffHeight:i-a}}(e,o,t),a=r.wrapperWidth,s=r.wrapperHeight;return function(n,t,e,o,i,r,a){var s=n>t?e*(a?1:.5):0,l=o>i?r*(a?1:.5):0;return{minPositionX:n-t-s,maxPositionX:s,minPositionY:o-i-l,maxPositionY:l}}(a,r.newContentWidth,r.newDiffWidth,s,r.newContentHeight,r.newDiffHeight,Boolean(i))},ln=function(n,t){var e=sn(n,t);return n.bounds=e,e};function un(n,t,e,o,i,r,a){var s=e.minPositionX,l=e.minPositionY,u=e.maxPositionX,c=e.maxPositionY,p=0,d=0;return a&&(p=i,d=r),{x:cn(n,s-p,u+p,o),y:cn(t,l-d,c+d,o)}}var cn=function(n,t,e,o){return J(o?n<t?t:n>e?e:n:n,2)};function pn(n,t,e,o,i,r){var a=n.transformState,s=a.scale,l=a.positionX,u=a.positionY,c=o-s;return"number"!=typeof t||"number"!=typeof e?(console.error("Mouse X and Y position were not provided!"),{x:l,y:u}):un(l-t*c,u-e*c,i,r,0,0,null)}function dn(n,t,e,o,i){var r=t-(i?o:0);return!isNaN(e)&&n>=e?e:!isNaN(t)&&n<=r?r:n}var fn=function(n,t){var e=n.setup.panning.excluded,o=n.isInitialized,i=n.wrapperComponent,r=t.target,a=null===i||void 0===i?void 0:i.contains(r);return!!(o&&r&&a)&&!Wn(r,e)},mn=function(n){var t=n.isInitialized,e=n.isPanning,o=n.setup.panning.disabled;return!(!t||!e||o)},hn=function(n,t){var e=n.transformState,o=e.positionX,i=e.positionY;n.isPanning=!0;var r=t.clientX,a=t.clientY;n.startCoords={x:r-o,y:a-i}},gn=function(n,t){var e=t.touches,o=n.transformState,i=o.positionX,r=o.positionY;if(n.isPanning=!0,1===e.length){var a=e[0].clientX,s=e[0].clientY;n.startCoords={x:a-i,y:s-r}}};var vn=function(n,t,e){var o=n.startCoords,i=n.transformState,r=n.setup.panning,a=r.lockAxisX,s=r.lockAxisY,l=i.positionX,u=i.positionY;if(!o)return{x:l,y:u};var c=t-o.x,p=e-o.y;return{x:a?l:c,y:s?u:p}},yn=function(n,t){var e=n.setup,o=n.transformState.scale,i=e.minScale;return t>0&&o>=i?t:0},wn=function(n){var t=n.mounted,e=n.setup,o=e.disabled,i=e.velocityAnimation,r=n.transformState.scale;return!(i.disabled&&!(r>1)&&o&&!t)},bn=function(n){var t=n.mounted,e=n.velocity,o=n.bounds,i=n.setup,r=i.disabled,a=i.velocityAnimation,s=n.transformState.scale;return!(a.disabled&&!(s>1)&&r&&!t)&&!(!e||!o)};function xn(n,t,e,o,i,r,a,s,l,u){if(i){var c;if(t>a&&e>a)return(c=a+(n-a)*u)>l?l:c<a?a:c;if(t<r&&e<r)return(c=r+(n-r)*u)<s?s:c>r?r:c}return o?t:cn(n,r,a,i)}function Cn(n,t){if(wn(n)){var e=n.lastMousePosition,o=n.velocityTime,i=n.setup,r=n.wrapperComponent,a=i.velocityAnimation.equalToMove,s=Date.now();if(e&&o&&r){var l=function(n,t){return t?Math.min(1,n.offsetWidth/window.innerWidth):1}(r,a),u=t.x-e.x,c=t.y-e.y,p=u/l,d=c/l,f=s-o,m=u*u+c*c,h=Math.sqrt(m)/f;n.velocity={velocityX:p,velocityY:d,total:h}}n.lastMousePosition=t,n.velocityTime=s}}function Sn(n,t){var e=n.transformState.scale;on(n),ln(n,e),t.touches?gn(n,t):hn(n,t)}function kn(n,t,e){var o=n.startCoords,i=n.setup.alignmentAnimation,r=i.sizeX,a=i.sizeY;if(o){var s=vn(n,t,e),l=s.x,u=s.y,c=yn(n,r),p=yn(n,a);Cn(n,{x:l,y:u}),function(n,t,e,o,i){var r=n.setup.limitToBounds,a=n.wrapperComponent,s=n.bounds,l=n.transformState,u=l.scale,c=l.positionX,p=l.positionY;if(a&&t!==c&&e!==p&&s){var d=un(t,e,s,r,o,i,a),f=d.x,m=d.y;n.setTransformState(u,f,m)}}(n,l,u,c,p)}}function Pn(n){if(n.isPanning){var t=n.setup.panning.velocityDisabled,e=n.velocity,o=n.wrapperComponent,i=n.contentComponent;n.isPanning=!1,n.animate=!1,n.animation=null;var r=null===o||void 0===o?void 0:o.getBoundingClientRect(),a=null===i||void 0===i?void 0:i.getBoundingClientRect(),s=(null===r||void 0===r?void 0:r.width)||0,l=(null===r||void 0===r?void 0:r.height)||0,u=(null===a||void 0===a?void 0:a.width)||0,c=(null===a||void 0===a?void 0:a.height)||0,p=s<u||l<c;!t&&e&&(null===e||void 0===e?void 0:e.total)>.1&&p?function(n){var t=n.velocity,e=n.bounds,o=n.setup,i=n.wrapperComponent;if(bn(n)&&t&&e&&i){var r=t.velocityX,a=t.velocityY,s=t.total,l=e.maxPositionX,u=e.minPositionX,c=e.maxPositionY,p=e.minPositionY,d=o.limitToBounds,f=o.alignmentAnimation,m=o.zoomAnimation,h=o.panning,g=h.lockAxisY,v=h.lockAxisX,y=m.animationType,w=f.sizeX,b=f.sizeY,x=f.velocityAlignmentTime,C=function(n,t){var e=n.setup.velocityAnimation,o=e.equalToMove,i=e.animationTime,r=e.sensitivity;return o?i*t*r:i}(n,s),S=Math.max(C,x),k=yn(n,w),P=yn(n,b),T=k*i.offsetWidth/100,z=P*i.offsetHeight/100,E=l+T,I=u-T,Y=c+z,O=p-z,X=n.transformState,L=(new Date).getTime();rn(n,y,S,function(t){var e=n.transformState,o=e.scale,i=e.positionX,s=e.positionY,m=((new Date).getTime()-L)/x,h=1-(0,tn[f.animationType])(Math.min(1,m)),y=1-t,w=i+r*y,b=s+a*y,C=xn(w,X.positionX,i,v,d,u,l,I,E,h),S=xn(b,X.positionY,s,g,d,p,c,O,Y,h);i===w&&s===b||n.setTransformState(o,C,S)})}}(n):Tn(n)}}function Tn(n){var t=n.transformState.scale,e=n.setup,o=e.minScale,i=e.alignmentAnimation,r=i.disabled,a=i.sizeX,s=i.sizeY,l=i.animationTime,u=i.animationType;if(!(r||t<o||!a&&!s)){var c=function(n){var t=n.transformState,e=t.positionX,o=t.positionY,i=t.scale,r=n.setup,a=r.disabled,s=r.limitToBounds,l=r.centerZoomedOut,u=n.wrapperComponent;if(!a&&u&&n.bounds){var c=n.bounds,p=c.maxPositionX,d=c.minPositionX,f=c.maxPositionY,m=c.minPositionY,h=e>p||e<d,g=o>f||o<m,v=pn(n,e>p?u.offsetWidth:n.setup.minPositionX||0,o>f?u.offsetHeight:n.setup.minPositionY||0,i,n.bounds,s||l),y=v.x,w=v.y;return{scale:i,positionX:h?y:e,positionY:g?w:o}}}(n);c&&an(n,c,l,u)}}function zn(n,t,e){var o=n.transformState.scale,i=n.wrapperComponent,r=n.setup,a=r.minScale,s=r.limitToBounds,l=r.zoomAnimation,u=l.disabled,c=l.animationTime,p=l.animationType,d=u||o>=a;if((o>=1||s)&&Tn(n),!d&&i&&n.mounted){var f=En(n,a,t||i.offsetWidth/2,e||i.offsetHeight/2);f&&an(n,f,c,p)}}function En(n,t,e,o){var i=n.setup,r=i.minScale,a=i.maxScale,s=i.limitToBounds,l=dn(J(t,2),r,a,0,!1),u=pn(n,e,o,l,ln(n,l),s);return{scale:l,positionX:u.x,positionY:u.y}}var In={previousScale:1,scale:1,positionX:0,positionY:0},Yn=V(V({},In),{setComponents:function(){},contextInstance:null}),On={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,wheel:{step:.2,disabled:!1,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Xn=function(n){var t,e,o,i;return{previousScale:null!==(t=n.initialScale)&&void 0!==t?t:In.scale,scale:null!==(e=n.initialScale)&&void 0!==e?e:In.scale,positionX:null!==(o=n.initialPositionX)&&void 0!==o?o:In.positionX,positionY:null!==(i=n.initialPositionY)&&void 0!==i?i:In.positionY}},Ln=function(n){var t=V({},On);return Object.keys(n).forEach(function(e){var o=void 0!==n[e];if(void 0!==On[e]&&o){var i=Object.prototype.toString.call(On[e]),r="[object Object]"===i,a="[object Array]"===i;t[e]=r?V(V({},On[e]),n[e]):a?G(G([],On[e]),n[e]):n[e]}}),t},An=function(n,t,e){var o=n.transformState.scale,i=n.wrapperComponent,r=n.setup,a=r.maxScale,s=r.minScale,l=r.zoomAnimation.size;if(!i)throw new Error("Wrapper is not mounted");var u=o*Math.exp(t*e);return dn(J(u,3),s,a,l,!1)};function Nn(n,t,e,o,i){var r=n.wrapperComponent,a=n.transformState,s=a.scale,l=a.positionX,u=a.positionY;if(!r)return console.error("No WrapperComponent found");var c=(r.offsetWidth/2-l)/s,p=(r.offsetHeight/2-u)/s,d=En(n,An(n,t,e),c,p);if(!d)return console.error("Error during zoom event. New transformation state was not calculated.");an(n,d,o,i)}function Dn(n,t,e){var o=n.setup,i=n.wrapperComponent,r=o.limitToBounds,a=Xn(n.props),s=n.transformState,l=s.scale,u=s.positionX,c=s.positionY;if(i){var p=sn(n,a.scale),d=un(a.positionX,a.positionY,p,r,0,0,i),f={scale:a.scale,positionX:d.x,positionY:d.y};l===a.scale&&u===a.positionX&&c===a.positionY||an(n,f,t,e)}}var Bn=function(n){return function(t,e,o,i){void 0===o&&(o=600),void 0===i&&(i="easeOut"),on(n);var r=n.wrapperComponent,a="string"==typeof t?document.getElementById(t):t;if(r&&function(n){return n?void 0!==(null===n||void 0===n?void 0:n.offsetWidth)&&void 0!==(null===n||void 0===n?void 0:n.offsetHeight)||(console.error("Zoom node is not valid - it must contain offsetWidth and offsetHeight"),!1):(console.error("Zoom node not found"),!1)}(a)&&a&&r.contains(a)){var s=function(n,t,e){var o=n.wrapperComponent,i=n.setup,r=i.limitToBounds,a=i.minScale,s=i.maxScale;if(!o)return In;var l=o.getBoundingClientRect(),u=function(n){for(var t=n,e=0,o=0;t;)e+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return{x:e,y:o}}(t),c=u.x,p=u.y,d=t.offsetWidth,f=t.offsetHeight,m=o.offsetWidth/d,h=o.offsetHeight/f,g=dn(e||Math.min(m,h),a,s,0,!1),v=(l.width-d*g)/2,y=(l.height-f*g)/2,w=un((l.left-c)*g+v,(l.top-p)*g+y,sn(n,g),r,0,0,o);return{positionX:w.x,positionY:w.y,scale:g}}(n,a,e);an(n,s,o,i)}}},_n=function(n){return{instance:n,state:n.transformState,zoomIn:function(n){return function(t,e,o){void 0===t&&(t=.5),void 0===e&&(e=300),void 0===o&&(o="easeOut"),Nn(n,1,t,e,o)}}(n),zoomOut:function(n){return function(t,e,o){void 0===t&&(t=.5),void 0===e&&(e=300),void 0===o&&(o="easeOut"),Nn(n,-1,t,e,o)}}(n),setTransform:function(n){return function(t,e,o,i,r){void 0===i&&(i=300),void 0===r&&(r="easeOut");var a=n.transformState,s=a.positionX,l=a.positionY,u=a.scale,c=n.wrapperComponent,p=n.contentComponent;if(!n.setup.disabled&&c&&p){var d={positionX:isNaN(t)?s:t,positionY:isNaN(e)?l:e,scale:isNaN(o)?u:o};an(n,d,i,r)}}}(n),resetTransform:function(n){return function(t,e){void 0===t&&(t=200),void 0===e&&(e="easeOut"),Dn(n,t,e)}}(n),centerView:function(n){return function(t,e,o){void 0===e&&(e=200),void 0===o&&(o="easeOut");var i=n.transformState,r=n.wrapperComponent,a=n.contentComponent;if(r&&a){var s=Fn(t||i.scale,r,a);an(n,s,e,o)}}}(n),zoomToElement:Bn(n)}};function jn(){try{return{get passive(){return!0,!1}}}catch(n){return!1}}var Wn=function(n,t){var e=n.tagName.toUpperCase();return!!t.find(function(n){return n.toUpperCase()===e})||!!t.find(function(t){return n.classList.contains(t)})},Kn=function(n){n&&clearTimeout(n)},Mn=function(n,t,e){return"translate3d("+n+"px, "+t+"px, 0) scale("+e+")"},Fn=function(n,t,e){var o=e.offsetWidth*n,i=e.offsetHeight*n;return{scale:n,positionX:(t.offsetWidth-o)/2,positionY:(t.offsetHeight-i)/2}},Hn=function(n,t){var e=n.setup.wheel,o=e.disabled,i=e.wheelDisabled,r=e.touchPadDisabled,a=e.excluded,s=n.isInitialized,l=n.isPanning,u=t.target;return!(!s||l||o||!u)&&(!(i&&!t.ctrlKey)&&((!r||!t.ctrlKey)&&!Wn(u,a)))};function Rn(n,t,e){var o=t.getBoundingClientRect(),i=0,r=0;if("clientX"in n)i=(n.clientX-o.left)/e,r=(n.clientY-o.top)/e;else{var a=n.touches[0];i=(a.clientX-o.left)/e,r=(a.clientY-o.top)/e}return(isNaN(i)||isNaN(r))&&console.error("No mouse or touch offset found"),{x:i,y:r}}var Zn=function(n,t){var e=n.setup.pinch,o=e.disabled,i=e.excluded,r=n.isInitialized,a=t.target;return!(!r||o||!a)&&!Wn(a,i)},qn=function(n){var t=n.setup.pinch.disabled,e=n.isInitialized,o=n.pinchStartDistance;return!(!e||t||!o)},Un=function(n){return Math.sqrt(Math.pow(n.touches[0].pageX-n.touches[1].pageX,2)+Math.pow(n.touches[0].pageY-n.touches[1].pageY,2))},Qn=function(n,t){var e=n.props,o=e.onWheelStart,i=e.onZoomStart;n.wheelStopEventTimer||(on(n),nn(_n(n),t,o),nn(_n(n),t,i))},Vn=function(n,t){var e=n.props,o=e.onWheel,i=e.onZoom,r=n.contentComponent,a=n.setup,s=n.transformState.scale,l=a.limitToBounds,u=a.centerZoomedOut,c=a.zoomAnimation,p=a.wheel,d=c.size,f=c.disabled,m=p.step;if(!r)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var h=function(n,t,e,o,i){var r=n.transformState.scale,a=n.wrapperComponent,s=n.setup,l=s.maxScale,u=s.minScale,c=s.zoomAnimation,p=c.size,d=c.disabled;if(!a)throw new Error("Wrapper is not mounted");var f=r+t*(r-r*e)*e;if(i)return f;var m=!o&&!d;return dn(J(f,3),u,l,p,m)}(n,function(n,t){var e=n?n.deltaY<0?1:-1:0;return $(t,e)}(t,null),m,!t.ctrlKey);if(s!==h){var g=ln(n,h),v=Rn(t,r,s),y=l&&(f||0===d||u),w=pn(n,v.x,v.y,h,g,y),b=w.x,x=w.y;n.previousWheelEvent=t,n.setTransformState(h,b,x),nn(_n(n),t,o),nn(_n(n),t,i)}},Gn=function(n,t){var e=n.props,o=e.onWheelStop,i=e.onZoomStop;Kn(n.wheelAnimationTimer),n.wheelAnimationTimer=setTimeout(function(){n.mounted&&(zn(n,t.x,t.y),n.wheelAnimationTimer=null)},100),function(n,t){var e=n.previousWheelEvent,o=n.transformState.scale,i=n.setup,r=i.maxScale,a=i.minScale;return!!e&&(o<r||o>a||Math.sign(e.deltaY)!==Math.sign(t.deltaY)||e.deltaY>0&&e.deltaY<t.deltaY||e.deltaY<0&&e.deltaY>t.deltaY||Math.sign(e.deltaY)!==Math.sign(t.deltaY))}(n,t)&&(Kn(n.wheelStopEventTimer),n.wheelStopEventTimer=setTimeout(function(){n.mounted&&(n.wheelStopEventTimer=null,nn(_n(n),t,o),nn(_n(n),t,i))},160))},Jn=function(n,t){var e=Un(t);n.pinchStartDistance=e,n.lastDistance=e,n.pinchStartScale=n.transformState.scale,n.isPanning=!1,on(n)},$n=function(n,t){var e=n.contentComponent,o=n.pinchStartDistance,i=n.transformState.scale,r=n.setup,a=r.limitToBounds,s=r.centerZoomedOut,l=r.zoomAnimation,u=l.disabled,c=l.size;if(null!==o&&e){var p=function(n,t,e){var o=e.getBoundingClientRect(),i=n.touches,r=J(i[0].clientX-o.left,5),a=J(i[0].clientY-o.top,5);return{x:(r+J(i[1].clientX-o.left,5))/2/t,y:(a+J(i[1].clientY-o.top,5))/2/t}}(t,i,e);if(isFinite(p.x)&&isFinite(p.y)){var d=Un(t),f=function(n,t){var e=n.pinchStartScale,o=n.pinchStartDistance,i=n.setup,r=i.maxScale,a=i.minScale,s=i.zoomAnimation,l=s.size,u=s.disabled;if(!e||null===o||!t)throw new Error("Pinch touches distance was not provided");return t<0?n.transformState.scale:dn(J(t/o*e,2),a,r,l,!u)}(n,d);if(f!==i){var m=ln(n,f),h=a&&(u||0===c||s),g=pn(n,p.x,p.y,f,m,h),v=g.x,y=g.y;n.pinchMidpoint=p,n.lastDistance=d,n.setTransformState(f,v,y)}}}},nt=function(n){var t=n.pinchMidpoint;n.velocity=null,n.lastDistance=null,n.pinchMidpoint=null,n.pinchStartScale=null,n.pinchStartDistance=null,zn(n,null===t||void 0===t?void 0:t.x,null===t||void 0===t?void 0:t.y)};var tt=function(n,t){var e=n.isInitialized,o=n.setup,i=n.wrapperComponent,r=o.doubleClick,a=r.disabled,s=r.excluded,l=t.target,u=null===i||void 0===i?void 0:i.contains(l),c=e&&l&&u&&!a;return!!c&&(!Wn(l,s)&&!!c)},et=i.createContext(Yn),ot=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.mounted=!0,t.transformState=Xn(t.props),t.setup=Ln(t.props),t.wrapperComponent=null,t.contentComponent=null,t.isInitialized=!1,t.bounds=null,t.previousWheelEvent=null,t.wheelStopEventTimer=null,t.wheelAnimationTimer=null,t.isPanning=!1,t.startCoords=null,t.lastTouch=null,t.distance=null,t.lastDistance=null,t.pinchStartDistance=null,t.pinchStartScale=null,t.pinchMidpoint=null,t.velocity=null,t.velocityTime=null,t.lastMousePosition=null,t.animate=!1,t.animation=null,t.maxBounds=null,t.pressedKeys={},t.handleInitializeWrapperEvents=function(n){var e=jn();n.addEventListener("wheel",t.onWheelZoom,e),n.addEventListener("dblclick",t.onDoubleClick,e),n.addEventListener("touchstart",t.onTouchPanningStart,e),n.addEventListener("touchmove",t.onTouchPanning,e),n.addEventListener("touchend",t.onTouchPanningStop,e)},t.handleInitialize=function(){var n=t.setup.centerOnInit;t.applyTransformation(),t.forceUpdate(),n&&(setTimeout(function(){t.mounted&&t.setCenter()},50),setTimeout(function(){t.mounted&&t.setCenter()},100),setTimeout(function(){t.mounted&&t.setCenter()},200))},t.onWheelZoom=function(n){t.setup.disabled||Hn(t,n)&&t.isPressingKeys(t.setup.wheel.activationKeys)&&(Qn(t,n),Vn(t,n),Gn(t,n))},t.onPanningStart=function(n){var e=t.setup.disabled,o=t.props.onPanningStart;e||fn(t,n)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(n.preventDefault(),n.stopPropagation(),on(t),Sn(t,n),nn(_n(t),n,o))},t.onPanning=function(n){var e=t.setup.disabled,o=t.props.onPanning;e||mn(t)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(n.preventDefault(),n.stopPropagation(),kn(t,n.clientX,n.clientY),nn(_n(t),n,o))},t.onPanningStop=function(n){var e=t.props.onPanningStop;t.isPanning&&(Pn(t),nn(_n(t),n,e))},t.onPinchStart=function(n){var e=t.setup.disabled,o=t.props,i=o.onPinchingStart,r=o.onZoomStart;e||Zn(t,n)&&(Jn(t,n),on(t),nn(_n(t),n,i),nn(_n(t),n,r))},t.onPinch=function(n){var e=t.setup.disabled,o=t.props,i=o.onPinching,r=o.onZoom;e||qn(t)&&(n.preventDefault(),n.stopPropagation(),$n(t,n),nn(_n(t),n,i),nn(_n(t),n,r))},t.onPinchStop=function(n){var e=t.props,o=e.onPinchingStop,i=e.onZoomStop;t.pinchStartScale&&(nt(t),nn(_n(t),n,o),nn(_n(t),n,i))},t.onTouchPanningStart=function(n){var e=t.setup.disabled,o=t.props.onPanningStart;if(!e&&fn(t,n))if(t.lastTouch&&+new Date-t.lastTouch<200&&1===n.touches.length)t.onDoubleClick(n);else{t.lastTouch=+new Date,on(t);var i=n.touches,r=1===i.length,a=2===i.length;r&&(on(t),Sn(t,n),nn(_n(t),n,o)),a&&t.onPinchStart(n)}},t.onTouchPanning=function(n){var e=t.setup.disabled,o=t.props.onPanning;if(t.isPanning&&1===n.touches.length){if(e)return;if(!mn(t))return;n.preventDefault(),n.stopPropagation();var i=n.touches[0];kn(t,i.clientX,i.clientY),nn(_n(t),n,o)}else n.touches.length>1&&t.onPinch(n)},t.onTouchPanningStop=function(n){t.onPanningStop(n),t.onPinchStop(n)},t.onDoubleClick=function(n){t.setup.disabled||tt(t,n)&&function(n,t){var e=n.setup.doubleClick,o=e.disabled,i=e.mode,r=e.step,a=e.animationTime,s=e.animationType;if(!o){if("reset"===i)return Dn(n,a,s);var l=n.transformState.scale,u=n.contentComponent;if(!u)return console.error("No ContentComponent found");var c=An(n,"zoomOut"===i?-1:1,r),p=Rn(t,u,l),d=En(n,c,p.x,p.y);if(!d)return console.error("Error during zoom event. New transformation state was not calculated.");an(n,d,a,s)}}(t,n)},t.clearPanning=function(n){t.isPanning&&t.onPanningStop(n)},t.setKeyPressed=function(n){t.pressedKeys[n.key]=!0},t.setKeyUnPressed=function(n){t.pressedKeys[n.key]=!1},t.isPressingKeys=function(n){return!n.length||Boolean(n.find(function(n){return t.pressedKeys[n]}))},t.setComponents=function(n,e){t.wrapperComponent=n,t.contentComponent=e,ln(t,t.transformState.scale),t.handleInitializeWrapperEvents(n),t.handleInitialize(),t.handleRef(),t.isInitialized=!0,nn(_n(t),void 0,t.props.onInit)},t.setTransformState=function(n,e,o){isNaN(n)||isNaN(e)||isNaN(o)?console.error("Detected NaN set state values"):(n!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=n),t.transformState.positionX=e,t.transformState.positionY=o,t.applyTransformation())},t.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var n=Fn(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(n.scale,n.positionX,n.positionY)}},t.applyTransformation=function(){if(t.mounted&&t.contentComponent){var n=t.transformState,e=n.scale,o=n.positionX,i=n.positionY,r=Mn(o,i,e);t.contentComponent.style.transform=r,t.handleRef()}},t.handleRef=function(){t.props.setRef(_n(t))},t}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Q(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(t,n),t.prototype.componentDidMount=function(){var n=jn();window.addEventListener("mousedown",this.onPanningStart,n),window.addEventListener("mousemove",this.onPanning,n),window.addEventListener("mouseup",this.onPanningStop,n),document.addEventListener("mouseleave",this.clearPanning,n),window.addEventListener("keyup",this.setKeyUnPressed,n),window.addEventListener("keydown",this.setKeyPressed,n),this.handleRef()},t.prototype.componentWillUnmount=function(){var n=jn();window.removeEventListener("mousedown",this.onPanningStart,n),window.removeEventListener("mousemove",this.onPanning,n),window.removeEventListener("mouseup",this.onPanningStop,n),window.removeEventListener("keyup",this.setKeyUnPressed,n),window.removeEventListener("keydown",this.setKeyPressed,n),on(this)},t.prototype.componentDidUpdate=function(n){n!==this.props&&(ln(this,this.transformState.scale),this.setup=Ln(this.props))},t.prototype.render=function(){var n=_n(this),t=this.props.children,e="function"==typeof t?t(n):t;return i.createElement(et.Provider,{value:V(V({},this.transformState),{setComponents:this.setComponents,contextInstance:this})},e)},t}(t.Component),it=i.forwardRef(function(n,e){var o=t.useState(null),r=o[0],a=o[1];return t.useImperativeHandle(e,function(){return r},[r]),i.createElement(ot,V({},n,{setRef:a}))});var rt="transform-component-module_wrapper__1_Fgj",at="transform-component-module_content__2jYgh";!function(n,t){void 0===t&&(t={});var e=t.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===e&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}(".transform-component-module_wrapper__1_Fgj {\n  position: relative;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  overflow: hidden;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none;\n  margin: 0;\n  padding: 0;\n}\n.transform-component-module_content__2jYgh {\n  display: flex;\n  flex-wrap: wrap;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  margin: 0;\n  padding: 0;\n  transform-origin: 0% 0%;\n}\n.transform-component-module_content__2jYgh img {\n  pointer-events: none;\n}\n");var st=function(n){var e=n.children,o=n.wrapperClass,r=void 0===o?"":o,a=n.contentClass,s=void 0===a?"":a,l=n.wrapperStyle,u=n.contentStyle,c=t.useContext(et).setComponents,p=t.useRef(null),d=t.useRef(null);return t.useEffect(function(){var n=p.current,t=d.current;null!==n&&null!==t&&c&&c(n,t)},[]),i.createElement("div",{ref:p,className:"react-transform-wrapper "+rt+" "+r,style:l},i.createElement("div",{ref:d,className:"react-transform-component "+at+" "+s,style:u},e))},lt=f(["\n  margin: 0px;\n  position: relative;\n  display: flex;\n  place-content: center;\n  min-height: 70vh;\n  align-items: center;\n"],["\n  margin: 0px;\n  position: relative;\n  display: flex;\n  place-content: center;\n  min-height: 70vh;\n  align-items: center;\n"]),ut=f(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  // opacity animation to make spinner appear with delay\n  opacity: ",";\n  transition: opacity .3s;\n  pointer-events: none;\n"],["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  // opacity animation to make spinner appear with delay\n  opacity: ",";\n  transition: opacity .3s;\n  pointer-events: none;\n"]),ct=f(["\n  position: absolute;\n  z-index: 8000;\n  width: 100%;\n  display: flex;\n  place-content: center;\n  bottom: 3em;\n"],["\n  position: absolute;\n  z-index: 8000;\n  width: 100%;\n  display: flex;\n  place-content: center;\n  bottom: 3em;\n"]),pt=f(["\n  height: 100%;\n  width: 33.333%;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  color: white;\n  cursor: pointer;\n  transition: all ease-in-out 0.1s;\n  :hover {\n    background-color: rgba(255, 255, 255, 0.6);\n  }\n"],["\n  height: 100%;\n  width: 33.333%;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  color: white;\n  cursor: pointer;\n  transition: all ease-in-out 0.1s;\n  :hover {\n    background-color: rgba(255, 255, 255, 0.6);\n  }\n"]),dt=f(["\n\n  display: block; // removes browser default gutter\n  height: auto;\n  margin: 0 auto; // main center on very short screens or very narrow img\n  max-width: 100%;\n\n  // disable user select\n  -webkit-touch-callout: none;\n  user-select: none;\n\n  // opacity animation on image load\n  opacity: 0;\n  transition: opacity .3s;\n\n  opacity: ",";\n"],["\n\n  display: block; // removes browser default gutter\n  height: auto;\n  margin: 0 auto; // main center on very short screens or very narrow img\n  max-width: 100%;\n\n  // disable user select\n  -webkit-touch-callout: none;\n  user-select: none;\n\n  // opacity animation on image load\n  opacity: 0;\n  transition: opacity .3s;\n\n  opacity: ",";\n"]);function ft(n){var t=n.srcSet||n.srcset;return Array.isArray(t)?t.join():t}var mt=i.createContext({theme:r,toggleTheme:function(n){}}),ht=function(n){function e(n){s(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return t.theme=function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object.assign({},e);return Object.keys(t).forEach(function(i){"object"===a(t[i])&&t[i]&&e[i]?o[i]=n(e[i],t[i]):o[i]=t[i]}),o}(r,t.props.theme),t.toggleTheme=function(n){t.setState(function(){return{theme:n}})},t.state={imgLoaded:!1,theme:t.theme,toggleTheme:t.toggleTheme},function(n){var t=this;n.forEach(function(n){return t[n]=t[n].bind(t)})}.call(t,["gotoNext","gotoPrev","closeBackdrop","handleKeyboardInput","handleImgLoaded"]),t}return c(e,n),l(e,[{key:"componentDidMount",value:function(){this.props.isOpen&&(this.props.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),"number"==typeof this.props.currImg&&this.preloadImg(this.props.currImg,this.handleImgLoaded))}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){if(U){if(n.preloadNextImg){var t=n.currImg+1,e=n.currImg-1;this.preloadImg(e),this.preloadImg(t)}if(this.props.currImg!==n.currImg||!this.props.isOpen&&n.isOpen){var o=this.preloadImgData(n.imgs[n.currImg],this.handleImgLoaded);o&&this.setState({imgLoaded:o.complete})}return!this.props.isOpen&&n.isOpen&&n.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),!n.isOpen&&n.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput),null}}},{key:"componentWillUnmount",value:function(){this.props.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput)}},{key:"preloadImg",value:function(n,t){return this.preloadImgData(this.props.imgs[n],t)}},{key:"preloadImgData",value:function(n,t){if(n){var e=new Image,o=ft(n);return e.onerror=t,e.onload=t,e.src=n.src,o&&(e.srcset=o),e}}},{key:"gotoNext",value:function(n){var t=this.props,e=t.currImg,o=t.imgs;this.state.imgLoaded&&e!==o.length-1&&(n&&(n.preventDefault(),n.stopPropagation()),this.props.onClickNext())}},{key:"gotoPrev",value:function(n){var t=this.props.currImg;this.state.imgLoaded&&0!==t&&(n&&(n.preventDefault(),n.stopPropagation()),this.props.onClickPrev())}},{key:"closeBackdrop",value:function(n){"viewerBackdrop"!==n.target.id&&"FIGURE"!==n.target.tagName||this.props.onClose()}},{key:"handleKeyboardInput",value:function(n){var t=n.keyCode;return 37===t||33===t||38===t?(this.gotoPrev(n),!0):39===t||34===t||40===t?(this.gotoNext(n),!0):(27===t||32===t)&&(this.props.onClose(),!0)}},{key:"handleImgLoaded",value:function(){this.setState({imgLoaded:!0})}},{key:"renderArrowPrev",value:function(n){return 0===this.props.currImg?null:i.createElement(y,{theme:n,direction:"left",icon:"arrowLeft",onClick:this.gotoPrev,title:this.props.leftArrowTitle,type:"button"})}},{key:"renderArrowNext",value:function(n){return this.props.currImg===this.props.imgs.length-1?null:i.createElement(y,{theme:n,direction:"right",icon:"arrowRight",onClick:this.gotoNext,title:this.props.rightArrowTitle,type:"button"})}},{key:"renderDialog",value:function(n){var e=this,r=this.props,a=r.backdropCloseable,s=r.isOpen,l=r.showThumbnails,u=r.width,c=this.state.imgLoaded;if(!s)return i.createElement("span",{key:"closed"});var p=l?this.theme.thumbnail.size+this.theme.container.gutter.vertical:0;return i.createElement(mt.Consumer,null,function(r){var s=r.theme;r.toggleTheme;return s=n.theme,i.createElement(x,{theme:s,key:"open",onClick:a&&e.closeBackdrop,onTouchEnd:a&&e.closeBackdrop},i.createElement(t.Fragment,null,i.createElement("div",{style:{position:"relative",marginBottom:p,maxWidth:u,minWidth:"50vw",minHeight:"50vh"}},c&&e.renderHeader(s)," ",e.renderImgs(s),e.renderSpinner()," ",c&&e.renderFooter(s)),c&&e.renderThumbnails(s),c&&e.renderArrowPrev(s),c&&e.renderArrowNext(s),e.props.preventScroll&&i.createElement(o,null)))})}},{key:"renderImgs",value:function(n){var t=this.props,e=t.currImg,o=t.imgs,r=t.onClickImg,a=t.showThumbnails,s=this.state.imgLoaded;if(!o||!o.length)return null;var l=o[e],u=ft(l),c=u?"100vw":null,d=a?n.thumbnail.size:0,f=n.header.height+n.footer.height+d+n.container.gutter.vertical+"px";return i.createElement(gt,null,i.createElement(it,null,function(n){var t=n.zoomIn,e=n.zoomOut,o=n.resetTransform;p(n,["zoomIn","zoomOut","resetTransform"]);return i.createElement(i.Fragment,null,s&&i.createElement(yt,null,i.createElement("div",{style:{borderRadius:"2px",padding:"2px",display:"flex",background:"rgba(0, 0, 0, 0.6)",height:"36px",width:"108px"}},i.createElement(wt,{title:"Zoom out",style:{bottom:"6px"},left:!0,onClick:function(){return e()}},i.createElement(h,{type:"minus"})),i.createElement(wt,{title:"Reset zoom",borderRadius:"0px",onClick:function(){return o()}},i.createElement(h,{type:"cross"})),i.createElement(wt,{title:"Zoom in",right:!0,onClick:function(){return t()}},i.createElement(h,{type:"plus"})))),i.createElement(st,null,i.createElement(bt,{onClick:r,sizes:c,alt:l.alt,src:l.src,srcSet:u,imgLoaded:s,style:{cursor:r?"pointer":"auto",maxHeight:"calc(100vh - "+f}})))}))}},{key:"renderThumbnails",value:function(n){var t=this.props,e=t.imgs,o=t.currImg,r=t.leftArrowTitle,a=t.rightArrowTitle,s=t.onClickThumbnail,l=t.showThumbnails,u=t.thumbnailOffset;return l?i.createElement(F,{theme:n,leftTitle:r,rightTitle:a,currImg:o,imgs:e,offset:u,onClickThumbnail:s}):null}},{key:"renderHeader",value:function(n){var t=this.props,e=t.imgs,o=t.currImg,r=t.closeBtnTitle,a=t.customControls,s=t.onClose,l=t.showCloseBtn;return i.createElement(Y,{theme:n,customControls:a,onClose:s,caption:e[o].caption,showCloseBtn:l,closeBtnTitle:r})}},{key:"renderFooter",value:function(n){var t=this.props,e=t.currImg,o=t.imgs,r=t.imgCountSeparator,a=t.showImgCount;return o&&o.length?i.createElement(k,{theme:n,countCurr:e+1,countSeparator:r,countTotal:o.length,showCount:a}):null}},{key:"renderSpinner",value:function(){var n=this.props,t=n.spinner,e=n.spinnerDisabled,o=n.spinnerColor,r=n.spinnerSize,a=this.state.imgLoaded,s=t;return e?null:i.createElement(vt,{spinnerActive:!a},i.createElement(s,{color:o,size:r}))}},{key:"render",value:function(){return i.createElement(mt.Provider,{value:this.state},this.renderDialog(this.state))}}]),e}(t.Component);ht.defaultProps={currImg:0,enableKeyboardInput:!0,imgCountSeparator:" / ",onClickShowNextImg:!0,preloadNextImg:!0,preventScroll:!0,showCloseBtn:!0,showImgCount:!0,spinnerDisabled:!1,spinner:function(n){return i.createElement(Z,null,i.createElement(q,{size:n.size,color:n.color,animationDelay:"0"}),i.createElement(q,{size:n.size,color:n.color,animationDelay:"0.2"}),i.createElement(q,{size:n.size,color:n.color,animationDelay:"0.4"}))},spinnerColor:"#fff",spinnerSize:50,theme:{},thumbnailOffset:2,width:1024};var gt=e.figure(lt),vt=e.div(ut,function(n){return n.spinnerActive?1:0}),yt=e.div(ct),wt=e.button(pt),bt=e.img(dt,function(n){return n.imgLoaded&&"1"});return ht});
